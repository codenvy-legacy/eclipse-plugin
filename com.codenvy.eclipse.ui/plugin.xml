<?xml version="1.0" encoding="UTF-8"?>
<!--

    Copyright (c) 2014 Codenvy, S.A.
    All rights reserved. This program and the accompanying materials
    are made available under the terms of the Eclipse Public License v1.0
    which accompanies this distribution, and is available at
    http://www.eclipse.org/legal/epl-v10.html

    Contributors:
      Codenvy, S.A. - initial API and implementation

-->
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.importWizards">
      <category
            id="com.codenvy.eclipse.ui.wizard.category.import"
            name="Codenvy">
      </category>
      <wizard
            category="com.codenvy.eclipse.ui.wizard.category.import"
            class="com.codenvy.eclipse.ui.wizard.importer.ImportProjectFromCodenvyWizard"
            icon="images/Import.gif"
            id="com.codenvy.eclipse.ui.wizard.import"
            name="Existing Codenvy Projects">
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.newWizards">
      <category
            id="com.codenvy.eclipse.ui.wizard.category.new"
            name="Codenvy">
      </category>
      <wizard
            category="com.codenvy.eclipse.ui.wizard.category.new"
            class="com.codenvy.eclipse.ui.wizard.importer.ImportProjectFromCodenvyWizard"
            hasPages="true"
            icon="images/New.gif"
            id="com.codenvy.eclipse.ui.wizard.new"
            name="Projects from Codenvy"
            project="true">
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.exportWizards">
      <category
            id="com.codenvy.eclipse.ui.wizard.category.export"
            name="Codenvy">
      </category>
      <wizard
            category="com.codenvy.eclipse.ui.wizard.category.export"
            class="com.codenvy.eclipse.ui.wizard.exporter.ExportProjectToCodenvyWizard"
            icon="images/Export.gif"
            id="com.codenvy.eclipse.ui.wizard.export"
            name="Project to Codenvy">
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="com.codenvy.eclipse.ui.team.push"
            name="Push">
      </command>
      <command
            id="com.codenvy.eclipse.ui.team.update"
            name="Update">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:team.main?after=group1">
         <command
               commandId="com.codenvy.eclipse.ui.team.push"
               icon="images/Push.png"
               id="com.codenvy.eclipse.ui.team.popup.push"
               label="Push project"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <or>
                  <with
                        variable="activeMenuSelection">
                     <reference
                           definitionId="com.codenvy.eclipse.ui.team.resourceContributions">
                     </reference>
                  </with>
                  <with
                        variable="activeMenuEditorInput">
                     <reference
                           definitionId="com.codenvy.eclipse.ui.team.resourceContributions">
                     </reference>
                  </with></or>
            </visibleWhen>
         </command>
         <command
               commandId="com.codenvy.eclipse.ui.team.update"
               icon="images/Update.png"
               id="com.codenvy.eclipse.ui.team.popup.update"
               label="Update project"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <or>
                  <with
                        variable="activeMenuSelection">
                     <reference
                           definitionId="com.codenvy.eclipse.ui.team.resourceContributions">
                     </reference>
                  </with>
                  <with
                        variable="activeMenuEditorInput">
                     <reference
                           definitionId="com.codenvy.eclipse.ui.team.resourceContributions">
                     </reference>
                  </with>
               </or>
            </visibleWhen>
         </command>
      </menuContribution>
      <!-- see bug https://bugs.eclipse.org/bugs/show_bug.cgi?id=175693 -->
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <menu
               id="team.main"
               label="Team">
            <separator
                  name="group1"
                  visible="true"/>
         </menu>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="com.codenvy.eclipse.ui.team.resourceContributions">
         <iterate
               ifEmpty="false"
               operator="and">
            <adapt
                  type="org.eclipse.core.resources.IResource">
               <test
                     args="org.eclipse.team.core.repository, com.codenvy.eclipse.core.team.codenvyProvider"
                     property="org.eclipse.core.resources.projectPersistentProperty">
               </test>
            </adapt>
         </iterate>
      </definition>
   </extension>
   <extension
         point="org.eclipse.ui.decorators">
      <decorator
            adaptable="true"
            class="com.codenvy.eclipse.ui.team.CodenvyLightweightLabelDecorator"
            id="com.codenvy.eclipse.ui.team.codenvyLightweightLabelDecorator"
            label="Codenvy"
            lightweight="true"
            location="BOTTOM_RIGHT"
            state="true">
         <enablement>
            <objectClass
                  name="org.eclipse.core.resources.IResource">
            </objectClass>
         </enablement>
      </decorator>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="com.codenvy.eclipse.ui.team.PushProjectHandler"
            commandId="com.codenvy.eclipse.ui.team.push">
      </handler>
      <handler
            class="com.codenvy.eclipse.ui.team.UpdateProjectHandler"
            commandId="com.codenvy.eclipse.ui.team.update">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="com.codenvy.eclipse.ui.preferences.CodenvyPreferencesPage"
            id="com.codenvy.eclipse.ui.preferences"
            name="Codenvy">
      </page>
   </extension>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer
            class="com.codenvy.eclipse.ui.preferences.CodenvyPreferencesInitializer">
      </initializer>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchConfigurationTabGroups">
      <launchConfigurationTabGroup
            class="com.codenvy.eclipse.ui.launcher.LaunchConfigurationTabGroup"
            id="com.codenvy.eclipse.ui.launcher.launchConfigurationTabGroup"
            type="com.codenvy.eclipse.core.launcher.launchConfigurationType">
      </launchConfigurationTabGroup>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchConfigurationTypeImages">
      <launchConfigurationTypeImage
            configTypeID="com.codenvy.eclipse.core.launcher.launchConfigurationType"
            icon="images/LaunchLogo.png"
            id="com.codenvy.eclipse.ui.launcher.launchConfigurationTypeImage">
      </launchConfigurationTypeImage>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchShortcuts">
      <shortcut
            class="com.codenvy.eclipse.ui.launcher.RunOnCodenvyShortcut"
            description="Runs an application on Codenvy"
            icon="images/RunOnCodenvy.png"
            id="com.codenvy.eclipse.ui.launcher.runOnCodenvy"
            label="Run project on Codenvy"
            modes="run"
            path="codenvy">
         <contextualLaunch>
            <enablement>
               <or>
                  <with
                        variable="activeMenuSelection">
                     <reference
                           definitionId="com.codenvy.eclipse.ui.team.resourceContributions">
                     </reference>
                  </with>
                  <with
                        variable="activeMenuEditorInput">
                     <reference
                           definitionId="com.codenvy.eclipse.ui.team.resourceContributions">
                     </reference>
                  </with>
               </or></enablement>
         </contextualLaunch>
      </shortcut>
      <shortcut
            class="com.codenvy.eclipse.ui.launcher.BuildOnCodenvyShortcut"
            description="Builds an application on Codenvy"
            icon="images/BuildOnCodenvy.png"
            id="com.codenvy.eclipse.ui.launcher.buildOnCodenvy"
            label="Build project on Codenvy"
            modes="run"
            path="codenvy">
         <contextualLaunch>
            <enablement>
               <or>
                  <with
                        variable="activeMenuSelection">
                     <reference
                           definitionId="com.codenvy.eclipse.ui.team.resourceContributions">
                     </reference>
                  </with>
                  <with
                        variable="activeMenuEditorInput">
                     <reference
                           definitionId="com.codenvy.eclipse.ui.team.resourceContributions">
                     </reference>
                  </with>
               </or>
            </enablement>
         </contextualLaunch>
      </shortcut>
   </extension>
   <extension
         point="org.eclipse.debug.ui.consoleLineTrackers">
      <consoleLineTracker
            class="com.codenvy.eclipse.ui.launcher.RunOnCodenvyConsoleLineTracker"
            id="com.codenvy.eclipse.ui.launcher.runOnCodenvyConsoleLineTracker"
            processType="com.codenvy.eclipse.core.launcher.CodenvyRunnerProcess">
      </consoleLineTracker>
      <consoleLineTracker
            class="com.codenvy.eclipse.ui.launcher.BuildOnCodenvyConsoleLineTracker"
            id="com.codenvy.eclipse.ui.launcher.buildOnCodenvyConsoleLineTracker"
            processType="com.codenvy.eclipse.core.launcher.CodenvyBuilderProcess">
      </consoleLineTracker>
   </extension>
   <extension
         point="com.codenvy.eclipse.core.credentialsProvider">
      <CredentialsProvider
            class="com.codenvy.eclipse.ui.CredentialsProviderWithPrompt">
      </CredentialsProvider>
   </extension>
</plugin>
